<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Choose Your Package — Vionyx</title>

  <!-- Consent Mode v2 -->
  <script>
    (function () {
      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
      window.gtag = window.gtag || gtag;

      gtag('consent', 'default', {
        ad_storage: 'denied',
        analytics_storage: 'denied',
        ad_user_data: 'denied',
        ad_personalization: 'denied'
      }, { region: ['GB','IE','DE','FR','NL','ES','IT','SE','NO','DK','FI','AT','BE','PT','PL'] });

      try {
        const saved = JSON.parse(localStorage.getItem('consentChoice') || 'null');
        if (saved && saved.state) gtag('consent', 'update', saved.state);
      } catch(e) {}

      window.applyConsent = function(accept) {
        const state = accept ? {
          ad_storage: 'granted',
          analytics_storage: 'granted',
          ad_user_data: 'granted',
          ad_personalization: 'granted'
        } : {
          ad_storage: 'denied',
          analytics_storage: 'denied',
          ad_user_data: 'denied',
          ad_personalization: 'denied'
        };
        gtag('consent', 'update', state);
        localStorage.setItem('consentChoice', JSON.stringify({ state, ts: Date.now() }));
        var b = document.getElementById('consent-banner'); if (b) b.remove();
      };
    })();
  </script>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17444594729"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'AW-17444594729');
  </script>

  <style>
    body{margin:0;font-family:Poppins,system-ui,Arial;background:#0b1720;color:#fff}
    .wrap{max-width:1000px;margin:0 auto;padding:2rem}
    h1{margin:.2rem 0 1rem}
    .sub{color:#9fdfff;margin-bottom:1rem}
    .bar{display:flex;gap:.5rem;margin:1rem 0}
    .bar input{flex:1;padding:.8rem 1rem;border-radius:10px;border:1px solid rgba(255,255,255,.18);background:rgba(0,0,0,.35);color:#fff}
    .bar small{opacity:.8}
    .tabs{display:flex;gap:.6rem;margin:1rem 0}
    .tab{padding:.5rem .9rem;border-radius:999px;border:1px solid rgba(255,255,255,.18);cursor:pointer;background:rgba(255,255,255,.08)}
    .tab.active{background:linear-gradient(90deg,#0aa0ff,#00f6ff);color:#00222a}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1rem;margin-top:1rem}
    .card{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:1rem;display:flex;flex-direction:column}
    .title{font-weight:700;margin-bottom:.3rem}
    .price{color:#00f6ff;margin:.2rem 0 .6rem}
    ul{padding-left:1.2rem;margin:.4rem 0;flex:1}
    .btn{margin-top:.8rem;padding:.7rem 1rem;border-radius:10px;border:1px solid rgba(255,255,255,.18);background:linear-gradient(90deg,#0aa0ff,#00f6ff);color:#00222a;font-weight:700;cursor:pointer}
    a.small{color:#9fdfff;text-decoration:none}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Choose your plan</h1>
    <p class="sub">Pick a package. You can add a domain now or later — it’s optional here.</p>

    <div class="bar">
      <input id="domain" placeholder="Optional: domain (e.g., vionyx.co.uk)"/>
    </div>
    <small>Tip: You can leave the domain blank, or paste one later on the next step.</small>

    <div class="tabs">
      <button class="tab active" data-billing="monthly">Monthly</button>
      <button class="tab" data-billing="oneoff">One-off</button>
    </div>

    <div id="cards" class="grid"><!-- JS fills --></div>

    <p style="margin-top:1rem"><a class="small" href="index.html">← Back to home</a></p>
  </div>

  <script>
    const qs = new URLSearchParams(location.search);
    const domainInput = document.getElementById('domain');
    const tabs = document.querySelectorAll('.tab');
    const cards = document.getElementById('cards');

    function normalize(v){
      v=(v||"").trim().toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"");
      if(!v) return "";
      if(!v.includes(".")) return v + ".com";
      return v;
    }

    const fromQuery = normalize(qs.get('domain')||"");
    const fromSession = sessionStorage.getItem("v_domain") || "";
    domainInput.value = fromQuery || fromSession;

    let billing = "monthly";
    const PLANS = {
      monthly: [
        { id:"basic", name:"Basic", price:"£29/mo", features:["1–3 pages","Mobile-friendly","SSL & hosting","Support"] },
        { id:"standard", name:"Standard", price:"£49/mo", features:["Up to 6 pages","Blog / CMS","Contact forms","Priority support"] },
        { id:"premium", name:"Premium", price:"£79/mo", features:["Unlimited pages","Bookings/e-commerce","Speed & SEO boost","VIP support"] }
      ],
      oneoff: [
        { id:"basic", name:"Basic", price:"£399 one-off", features:["1–3 pages","Mobile-friendly","SSL ready","Handover"] },
        { id:"standard", name:"Standard", price:"£699 one-off", features:["Up to 6 pages","Blog / CMS","Contact forms","Training"] },
        { id:"premium", name:"Premium", price:"£1199 one-off", features:["Unlimited pages","Bookings/e-commerce","Speed & SEO","Launch support"] }
      ]
    };

    function render(){
      cards.innerHTML = "";
      PLANS[billing].forEach(p=>{
        const card = document.createElement('div');
        card.className = "card";
        card.innerHTML = `
          <div class="title">${p.name}</div>
          <div class="price">${p.price}</div>
          <ul>${p.features.map(f=>`<li>${f}</li>`).join("")}</ul>
          <button class="btn" data-plan="${p.name}">Select ${p.name}</button>
        `;
        card.querySelector('button').onclick = ()=>{
          const domain = normalize(domainInput.value);
          sessionStorage.setItem("v_domain", domain);
          sessionStorage.setItem("v_plan", p.name);
          sessionStorage.setItem("v_billing", billing);
          location.href = "details.html";
        };
        cards.appendChild(card);
      });
    }

    tabs.forEach(t=>{
      t.onclick=()=>{
        tabs.forEach(x=>x.classList.remove("active"));
        t.classList.add("active");
        billing = t.dataset.billing;
        render();
      };
    });

    render();
  </script>

  <!-- Consent banner -->
  <div id="consent-banner" style="
    position:fixed;left:0;right:0;bottom:0;z-index:9999;
    background:rgba(0,0,0,.92);color:#fff;padding:16px;display:flex;gap:12px;
    align-items:center;justify-content:center;flex-wrap:wrap;font:14px/1.4 system-ui,Segoe UI,Roboto,Arial">
    <span style="max-width:820px;opacity:.95">
      We use cookies to analyze traffic and improve your experience. You can accept or reject optional cookies.
    </span>
    <div style="display:flex;gap:8px">
      <button onclick="applyConsent(false)" style="padding:10px 14px;border:1px solid #666;background:#222;color:#fff;border-radius:8px;cursor:pointer">Reject all</button>
      <button onclick="applyConsent(true)" style="padding:10px 14px;border:0;background:linear-gradient(90deg,#0aa0ff,#00f6ff);color:#00222a;border-radius:8px;cursor:pointer;font-weight:700">Accept all</button>
    </div>
  </div>
  <script>
    (function(){
      try { if (localStorage.getItem('consentChoice')) {
        var b = document.getElementById('consent-banner'); if (b) b.remove();
      }} catch(e) {}
    })();
  </script>
</body>
</html>
